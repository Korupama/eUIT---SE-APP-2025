### ============================================================================
### TEST ALL LECTURER CONTROLLER ENDPOINTS
### Giảng viên: 80068 | Sinh viên: 23520541
### Base URL: http://localhost:5128
### ============================================================================

@baseUrl = http://localhost:5128
@lecturerId = 80068
@studentId = 23520541
@classCode = IT001.Q11
@semester = 2025_2026_1

# First, login as lecturer to get token
### 1. Login as Lecturer
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "userId": "{{lecturerId}}",
  "password": "12345678",
  "role": "lecturer"
}

### Save the token from response above, then set it here:
@token = eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiI4MDA2OCIsInJvbGUiOiJsZWN0dXJlciIsIm5iZiI6MTc2NDkxMzUwOCwiZXhwIjoxNzY0OTE0NDA4LCJpYXQiOjE3NjQ5MTM1MDgsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTEyOCIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTEyOCJ9.Q8rE3FwMqQK-_pQRDeKzC5TFXCIju7sDdAuTjOAtXaqBl4hRWayQhf4kqTLDCkcT5EfgeJ35Cv8KEOj0lFrNEw

### ============================================================================
### PROFILE MANAGEMENT
### ============================================================================

### 2. GET /api/lecturer/profile - Get lecturer profile
GET {{baseUrl}}/api/lecturer/profile
Authorization: Bearer {{token}}

### 3. PUT /api/lecturer/profile - Update profile
PUT {{baseUrl}}/api/lecturer/profile
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "phone": "0909876543",
  "address": "789 Lê Hồng Phong, Quận 10, TP.HCM"
}

### ============================================================================
### COURSE MANAGEMENT
### ============================================================================

### 4. GET /api/lecturer/courses - Get all courses (with semester filter)
GET {{baseUrl}}/api/lecturer/courses?semester={{semester}}
Authorization: Bearer {{token}}

### 5. GET /api/lecturer/courses - Get all courses (no filter)
GET {{baseUrl}}/api/lecturer/courses
Authorization: Bearer {{token}}

### 6. GET /api/lecturer/courses/{classCode} - Get course detail
GET {{baseUrl}}/api/lecturer/courses/{{classCode}}
Authorization: Bearer {{token}}

### 7. GET /api/lecturer/schedule - Get teaching schedule
GET {{baseUrl}}/api/lecturer/schedule?semester={{semester}}
Authorization: Bearer {{token}}

### 8. GET /api/lecturer/schedule - Get schedule with date range
GET {{baseUrl}}/api/lecturer/schedule?semester={{semester}}&startDate=2024-09-01&endDate=2024-12-31
Authorization: Bearer {{token}}

### 9. GET /api/lecturer/schedule/nextclass - Get next upcoming class
GET {{baseUrl}}/api/lecturer/schedule/nextclass
Authorization: Bearer {{token}}

### 10. GET /api/lecturer/schedule/week - Get weekly schedule
GET {{baseUrl}}/api/lecturer/schedule/week
Authorization: Bearer {{token}}

### 11. GET /api/lecturer/schedule/month - Get monthly schedule
GET {{baseUrl}}/api/lecturer/schedule/month
Authorization: Bearer {{token}}

### ============================================================================
### GRADE MANAGEMENT
### ============================================================================

### 12. GET /api/lecturer/grades - Get all grades of a class
GET {{baseUrl}}/api/lecturer/grades?classCode={{classCode}}
Authorization: Bearer {{token}}

### 13. GET /api/lecturer/grades/{mssv} - Get specific student grade
GET {{baseUrl}}/api/lecturer/grades/{{studentId}}?classCode={{classCode}}
Authorization: Bearer {{token}}

### 14. PUT /api/lecturer/grades/{mssv} - Update student grade
PUT {{baseUrl}}/api/lecturer/grades/{{studentId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "maLop": "{{classCode}}",
  "diemQuaTrinh": 9.0,
  "diemGiuaKy": 8.5,
  "diemThucHanh": 9.5,
  "diemCuoiKy": 8.7
}

### ============================================================================
### EXAM MANAGEMENT
### ============================================================================

### 15. GET /api/lecturer/exams - Get all exams (with semester filter)
GET {{baseUrl}}/api/lecturer/exams?semester={{semester}}
Authorization: Bearer {{token}}

### 16. GET /api/lecturer/exams - Get all exams (with exam type filter)
GET {{baseUrl}}/api/lecturer/exams?semester={{semester}}&examType=GK
Authorization: Bearer {{token}}

### 17. GET /api/lecturer/exams - Get all exams (no filter)
GET {{baseUrl}}/api/lecturer/exams
Authorization: Bearer {{token}}

### 18. GET /api/lecturer/exams/{maLop} - Get exam detail
GET {{baseUrl}}/api/lecturer/exams/{{classCode}}
Authorization: Bearer {{token}}

### 19. GET /api/lecturer/exams/{maLop}/students - Get exam students list
GET {{baseUrl}}/api/lecturer/exams/{{classCode}}/students
Authorization: Bearer {{token}}

### ============================================================================
### ADMINISTRATIVE SERVICES
### ============================================================================

### 20. POST /api/lecturer/confirmation-letter - Create confirmation letter
POST {{baseUrl}}/api/lecturer/confirmation-letter
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "mssv": {{studentId}},
  "purpose": "Xin xác nhận sinh viên để xin visa"
}

### 21. GET /api/lecturer/tuition - Get student tuition info
GET {{baseUrl}}/api/lecturer/tuition?mssv={{studentId}}&hocKy={{semester}}
Authorization: Bearer {{token}}

### 22. GET /api/lecturer/tuition - Get student tuition (no semester filter)
GET {{baseUrl}}/api/lecturer/tuition?mssv={{studentId}}
Authorization: Bearer {{token}}

### ============================================================================
### APPEALS MANAGEMENT
### ============================================================================

### 23. GET /api/lecturer/appeals - Get all appeals (no filter)
GET {{baseUrl}}/api/lecturer/appeals
Authorization: Bearer {{token}}

### 24. GET /api/lecturer/appeals - Get pending appeals
GET {{baseUrl}}/api/lecturer/appeals?status=pending
Authorization: Bearer {{token}}

### 25. GET /api/lecturer/appeals - Get approved appeals
GET {{baseUrl}}/api/lecturer/appeals?status=approved
Authorization: Bearer {{token}}

### 26. GET /api/lecturer/appeals/{appealId} - Get appeal detail
# Note: Replace 1 with actual appeal ID from previous response
GET {{baseUrl}}/api/lecturer/appeals/1
Authorization: Bearer {{token}}

### 27. PUT /api/lecturer/appeals/{appealId} - Process appeal (Approve)
PUT {{baseUrl}}/api/lecturer/appeals/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": "approved",
  "comment": "Đơn phúc khảo hợp lệ, điểm đã được xem xét lại"
}

### 28. PUT /api/lecturer/appeals/{appealId} - Process appeal (Reject)
PUT {{baseUrl}}/api/lecturer/appeals/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": "rejected",
  "comment": "Điểm chấm đúng quy định, không thay đổi"
}

### ============================================================================
### NOTIFICATIONS
### ============================================================================

### 29. GET /api/lecturer/notifications - Get notifications (default: limit 50)
GET {{baseUrl}}/api/lecturer/notifications
Authorization: Bearer {{token}}

### 30. GET /api/lecturer/notifications - Get notifications (with pagination)
GET {{baseUrl}}/api/lecturer/notifications?limit=10&offset=0
Authorization: Bearer {{token}}

### 31. PUT /api/lecturer/notifications/{id}/read - Mark notification as read
# Note: Replace 1 with actual notification ID
PUT {{baseUrl}}/api/lecturer/notifications/1/read
Authorization: Bearer {{token}}

### ============================================================================
### ATTENDANCE & ABSENCE MANAGEMENT
### ============================================================================

### 32. POST /api/lecturer/absence - Report absence
POST {{baseUrl}}/api/lecturer/absence
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "maLop": "{{classCode}}",
  "ngayNghi": "2024-11-05",
  "lyDo": "Bận công tác đột xuất"
}

### 33. POST /api/lecturer/makeup-class - Schedule makeup class
POST {{baseUrl}}/api/lecturer/makeup-class
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "maLop": "{{classCode}}",
  "ngayHocBu": "2024-11-12",
  "tietBatDau": 7,
  "tietKetThuc": 9,
  "phongHoc": "A2.301",
  "lyDo": "Học bù cho buổi nghỉ ngày 05/11"
}

### 34. GET /api/lecturer/absences - Get absence history (with semester)
GET {{baseUrl}}/api/lecturer/absences?semester={{semester}}
Authorization: Bearer {{token}}

### 35. GET /api/lecturer/absences - Get absence history (all semesters)
GET {{baseUrl}}/api/lecturer/absences
Authorization: Bearer {{token}}

### 36. GET /api/lecturer/makeup-classes - Get makeup class history (with semester)
GET {{baseUrl}}/api/lecturer/makeup-classes?semester={{semester}}
Authorization: Bearer {{token}}

### 37. GET /api/lecturer/makeup-classes - Get makeup class history (all semesters)
GET {{baseUrl}}/api/lecturer/makeup-classes
Authorization: Bearer {{token}}

### ============================================================================
### SUMMARY
### Total endpoints tested: 37
### - Profile: 2 endpoints (GET, PUT)
### - Courses: 8 endpoints (GET courses, GET detail, GET schedule, GET nextclass, GET week, GET month)
### - Grades: 3 endpoints (GET class grades, GET student, PUT update)
### - Exams: 5 endpoints (GET exams, GET detail, GET students)
### - Admin Services: 3 endpoints (POST confirmation, GET tuition)
### - Appeals: 6 endpoints (GET list, GET detail, PUT process)
### - Notifications: 3 endpoints (GET list, PUT mark read)
### - Attendance: 7 endpoints (POST absence, POST makeup, GET histories)
### ============================================================================

